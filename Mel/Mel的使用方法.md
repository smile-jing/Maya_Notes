# 什么是MEL

MEL（Maya嵌入式语言）是用于操作Maya的脚本语言。
通过使用MEL，您可以自定义用户界面并创建自己的效果。
MEL具有600多个命令和75个功能。

## MEL命令的类型

- 场景命令
大约有500种最常用的命令。用于操纵场景及其环境。
- 管理命令
用于文件输入/输出和OS访问。
用户界面命令
用于控制按钮，窗口，菜单等。
- 功能
用于创建运动，粒子位置和其他特殊效果。
有些函数具有数组，曲线，数学函数，随机数和颜色转换等功能。

## 如何执行MEL命令

- 脚本编辑器（窗口->常规编辑器->脚本编辑器）
在脚本编辑器下的窗口中输入命令，然后通过编辑->执行执行。
- 命令行在
MAYA窗口底部的命令行中 输入命令。
- 加载并执行使用脚本文件编辑器创建的脚本 。
- .ma文件

- 将脚本存放到工具架并执行。

- 要运行的热键，将脚本分配给热键。
- 当设置或删除Expression 属性时，或者在创建或删除对象时，将执行该命令 。撤消与其他情况不同。

# 如何获得返回值

## 什么是返回值
许多MEL命令都有返回值。
有以下方法将返回值分配给变量。

- 使用反引号

```Mel
string $a;
$a = `sphere -r 5`
```

- 使用eval

```Mel
string $com = "shpere";
$a = `eval($com + "-r 5")`
```

# 程序

## 程序是什么

您可以通过组合多个命令，函数，过程等来定义自己的过程。
该过程具有以下功能。

- 语法是C和Shell脚本的组合。
- 可以使用变量，控制结构等。
- 返回值也可以通过return返回。
- 没有类似C的结构或​​指针。

## 程序形式

[global] proc [return type] <程序名称>( [参数, ...] )
{
    [MEL]
}

## 进行程序时的注意事项
- 如果存在同名的过程，则以后定义的过程将有效。
- 您不能创建与函数同名的过程。

# 脚本

## 什么是脚本
MEL脚本是一个包含命令和过程的文件。
您可以在脚本中使用global执行定义的过程。

## 脚本路径设置
默认情况下，在〜/ maya / scripts中搜索MEL脚本。
设置环境变量MAYA_SCRIPT_PATH以从其他目录搜索。

- 例
setenv MAYA_SCRIPT_PATH ~/maya/test:/usr/test
这将在〜/ maya / scripts，〜/ maya / test，/ usr / test中找到脚本。

## 脚本文件名
可以在Maya中执行MEL脚本，方法是使用文件名（过程名称）.mel将其放在脚本路径中。

- 例
如果在脚本中 global proc helloWorld(){ print("Hello World\n"); } 有一个被调用的脚本，则通过保留〜/ maya /在Maya中的MAYA_SCRIPT_PATH中设置的脚本或目录，保留包含该脚本的脚本文件的名称helloWorld.mel。您可以运行helloWorld。

## 脚本编辑器
通过使用脚本编辑器，可以使用以下功能（窗口->常规编辑器->脚本编辑器）。

- 加载并查看脚本( File -> Open Script )
- 加载脚本，执行命令，定义过程( File -> Source Script )
- 保存脚本 ( File -> Save Selected )
- 执行脚本 ( File -> Execute )
- 查看执行的命令 ( Edit -> Echo All Commands )
- 显示发生错误的行号( Edit -> Show Line Numbers )
- 堆栈跟踪 ( Edit -> Show Stack Trace )

# MEL定制

## 热键
可以通过选项->自定义UI->热键将MEL命令分配给特定的键。
您还可以分配多个命令。

## 工具架
您也可以将MEL命令添加到工具架中

在脚本编辑器中输入命令。
选中这些命令。
用鼠标中键将突出显示的部分拖放到工具架上，会创建一个默认图标并执行拖拽的命令。
右键进行编辑，使用自己的图标，改变字体大小颜色等

## Maya启动设置
启动Maya时，将运行脚本路径中的名为userSetup.mel的脚本。在此脚本中为您自己编写用户界面设置。但是，即使在其中编写了scene命令，也将无济于事，因为所有对象等在启动时都会被清除。

# 注释和变量
## 注释
有两种类型的注释。

//
注释直到行尾。（C ++风格）
/* */
它不能嵌套。（C语言风格）
变量
变量名称由字母数字字符和_（下划线）组成。
通过$标记变量名称来使用变量。
变量具有类型。
整型
浮动
字符串
字符串（类似于C ++ 字符串 ）
向量
3个浮点数的 数组。（类似于C语言结构）
（示例）<<3, 7.7, 2.5>>
矩阵
浮点矩阵（类似于二维数组）
（示例）<<2, 1.5, 3.3; 5.5, 2, 1.8>>
2 x 3矩阵
还有一个数组。
变量声明和初始化的示例

int $tmp = 2;
float $val = 3.5;
string $str = "test";
vector $vec = <<2, 3.2, 5.5>>;
print($vec.y); // 3.2 を表示 ( print $vec.y; ではエラーになる )
float $vec_x = $vec.x;
matrix $mat[2][3] = <<1.5, 2, 3.2; -1.5, 3, 4.3>>;
print($mat[0][1]); // 2 を表示
float $aval[2] = {3.5, 1.5};
string $strs[2] = {"test", "test2"};

对象属性
变量类型转换
向量矩阵运算符
控制结构
简单的MEL脚本
原始
使用原语的MEL脚本
简单的动画
光
使用者介面（UI）
用户界面（UI）基础
控制项
版面
命令执行
对话
脚本作业
用户界面管理
渲染
属性
